---
title: "Bats-DataManip"
author: "Shelby Cline"
date: '2022-06-27'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(lubridate)

bats <- readRDS('bats.RData')

bats <- bats %>% 
  mutate(year = year(DATE), 
         monthN = month(DATE),
         month = month.abb[monthN],
         hour = hour(TIME) )

# Any bat listed as CORROW should be listed as the secondary species
bats <- bats %>% 
  mutate( AUTO.ID = gsub("CORROW", 
                         unlist(strsplit(ALTERNATES, split=';', fixed=TRUE))[1]) )
```


```{r}
# species call counts by year -----
No.ID <- c('NoId', 'NoID', 'Noise')
bats.time <- bats %>% 
  filter(! AUTO.ID %in% No.ID, year < 2022) %>% 
  group_by(year, AUTO.ID) %>%
  tally()

ggplot(data=bats.time, aes(x=year, y=n, color=AUTO.ID) )+
  geom_line()+
  labs(title = 'Number of Total Calls Per Species', 
       subtitle = "From 2017-2021", 
       x = 'Year', y = 'Number of Calls')
```


